<!DOCTYPE html>
<html style="font-size: 100px;">
<head>
	<title>鸿鸡</title>
	<link rel="icon" href="data:image/ico;base64,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">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
</head>
<style type="text/css">
	* {margin: 0; padding: 0; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; }
	body{font: 400 0.12rem 'Open Sans'; color: #333; background-color: #f5f5f5; width: 100%;}
	.tc{text-align: center;}
	.mt10{margin-top: 0.1rem;}
	.pd10{padding: 0.1rem;}
	.hide{display: none;}
	ul > li {list-style:none;}
	th,td {text-align: left;}
	.flex{display: flex;}
	.flex-l{margin-right: auto;}
	.flex-r{margin-left: auto;}
	img{width: .20rem;height: .20rem;}
	h3 {line-height: .20rem;}
	.f14{font-size: .14rem;}
	.orange{color: orange;}
	button {padding: 0.03rem 0.05rem;}
	#add-btn{position: absolute;top: .50rem; right: .20rem;}
	#update-btn{position: absolute;top: .50rem; right: .65rem;}
	.modal .mask {position: fixed;height: 100%;width: 100%;background: #000;opacity: 0.7;top: 0;left: 0}
	.modal .modal-body {background: #fff; height: 3rem;left: 0.16rem;width: calc(100% - 0.32rem);position: fixed;top: calc(50% - 1.5rem);border-radius: 0.05rem;}
	.modal .modal-title {height: 0.4rem;line-height: 0.4rem;border-bottom: 0.01rem solid #ccc;font-weight: 600;font-size: 0.16rem;text-align: center;}
	input {width: 100%;height: 30px;line-height: 30px;margin-top: 5px;padding: 0 0.1rem;}
	.input-item label {font-size: 0.14rem;}
	.modal button {width: 44%;height: 0.3rem;line-height: 0.2rem;}
</style>
<body>
	<div id="fundapp">
		<div class="flex" style="margin-top: 0.5rem;">
			<h3 class="flex-r f14">鸿</h3>
			&nbsp;&nbsp;&nbsp;
			<img class="flex-l" src="data:image/ico;base64,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">
			<button type="button" id="add-btn">新增</button>
		</div>
		<div class="pd10 mt10">
			<table width="100%" id="fund-table">
				<thead>
					<tr>
						<th>名称</th>
						<th>代码</th>
						<th>涨幅</th>
						<th>净值</th>
						<th>估值</th>
					</tr>
				</thead>
				<tbody>

				</tbody>
			</table>
			<div class="modal hide" id="modal">
		        <div class="mask"></div>
		        <div class="modal-body">
		        	<div class="modal-title">
		        		新增基金
		        	</div>
		        	<form style="padding: 0.3rem 0.2rem;">
		        		<div class="input-item">
		        			<label>代码</label>
		        			<input type="text" name="code" id="code" placeholder="请输入基金代码" autocomplete="off" maxlength="6">
		        		</div>
		        		<div class="flex" style="margin-top: 0.5rem;">
		        			<button class="flex-l" type="button" id="cancel-btn">取消</button>
		        			<button class="flex-r" type="button" id="confirm-btn">确定</button>
		        		</div>
		        	</form>
		        </div>
		    </div>
		</div>
	</div>
</body>
<script type="text/javascript">
//缩放界面后重新设定html font size
let view_jsset_font, result_font, user_webset_font, clientWidth;
if(document.documentElement.currentStyle) {
	user_webset_font = document.documentElement.currentStyle['fontSize'];
} else {
	user_webset_font = getComputedStyle(document.documentElement,false)['fontSize'];
}
const xs = parseFloat(user_webset_font) / 100;
const docEl = document.documentElement,
	resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
	recalc = function() {
		clientWidth = docEl.clientWidth;
		if (!clientWidth) return;
		if (!document.addEventListener) return;
		view_jsset_font = (clientWidth / 3.75);
		result_font = view_jsset_font / xs;
		docEl.style.fontSize = result_font + 'px';
	};
window.addEventListener(resizeEvt, recalc, false);
recalc();
function jsonpgz(res) {
	main.addCache(res.fundcode, res);
};
function jsonp(req){
	const script = document.createElement('script');
	const url = req.url + '?callback=' + req.callback.name;
	script.src = url;
	document.getElementsByTagName('head')[0].appendChild(script);
}
const main = {
	init: function(){
		const _this = this;
		//增加按钮
		document.getElementById('add-btn').onclick = function(e){
			const modalObj = document.getElementById('modal');
			const style = window.getComputedStyle(modalObj)
			if (style.display !== 'block') {
				modalObj.style.display = 'block';
			}
		}
		//取消按钮
		document.getElementById('cancel-btn').onclick = function(e){
			document.getElementById('modal').style.display = 'none';
		}
		//确定按钮
		document.getElementById('confirm-btn').onclick = function(e){
			const name = document.getElementById('code').value;
			if (name === '') {
				document.getElementById('code').focus();
				return false;
			}
			_this.addCache(name, {});
			document.getElementById('modal').style.display = 'none';
		}
		_this.start();
	},
	getCache: function() {
		let data = localStorage.getItem('my_hongji_cache');
		if (data) {
			data = JSON.parse(data)
		} else {
			data = {};
		}
		return data;
	},
	addCache: function(id, value) {
		let data = this.getCache();
		data[id] = value;
		localStorage.setItem('my_hongji_cache', JSON.stringify(data));
		return true;
	},
	start: function() {
		const _this = this;
		clearInterval(_this.setInterval);
		_this.getData(function(){
			_this.initPage();
		});
		_this.setInterval = setInterval(function(){
			_this.getData(function(){
				_this.initPage();
			});
		}, 2000);
	},
	getData: function(callback) {
		const _this = this;
		const data = _this.getCache();
		let url = '';
		for (const i in data) {
			url = 'http://fundgz.1234567.com.cn/js/'+i+'.js?rt'+(new Date().getTime());
			jsonp({
			    url: url,
			    callback: jsonpgz 
			});
		}
		callback();
	},
	initPage: function() {
		const data = this.getCache();
		let html = '';
		for (const i in data) {
			html += '<tr>';
			html += '<td style="max-width:1.15rem;overflow:hidden;">'+data[i].name+'</td>';
			html += '<td>'+data[i].fundcode+'</td>';
			html += '<td>'+data[i].gszzl+'</td>';
			html += '<td>'+data[i].dwjz+'</td>';
			html += '<td>'+data[i].gsz+'</td>';
			html += '</tr>';
		}
		document.querySelector('#fund-table tbody').innerHTML = html;
	}
};
main.init();
//页面加载完成
document.onload = function() {
	main.init();
}
</script>
</html>